<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patient Records</title>
  <link rel="stylesheet" href="/css_files/admin_patient.css">

  <!-- Include SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  
  <script src="/js_files/crypto-js.min.js"></script> <!-- For encryption if needed in JS -->
</head>
<body>
  <!-- Main Container for Patient Management -->
  <div class="container">
    <h1>Our Patients</h1>
    <div class="search-container">
      <input type="text" id="search" placeholder="Search for a patient by name..." autocomplete="off">
    </div>

    <!-- New "No Patients Found" Message -->
    <div id="no-results-message" class="no-results">No patients found matching your search.</div>
    
    <!-- Container for Patient Cards -->
    <div id="patients-list" class="cards-container">
      <!-- Patient cards will be dynamically added here -->
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Edit Patient</h2>
        <form id="editForm" autocomplete="off">
            <input type="hidden" id="editId">

            <label for="editNHS">NHS:</label>
            <input type="text" id="editNHS" required autocomplete="off" maxlength="10" pattern="\d{10}" title="NHS must be exactly 10 digits">

            <label for="editTitle">Title:</label>
            <input type="text" id="editTitle" required autocomplete="off">

            <label for="editFirst">First Name:</label>
            <input type="text" id="editFirst" required autocomplete="off">

            <label for="editLast">Last Name:</label>
            <input type="text" id="editLast" required autocomplete="off">

            <label for="editDOB">Date of Birth:</label>
            <input type="date" id="editDOB" required autocomplete="off" max="">

            <label for="editEmail">Email:</label>
            <input type="email" id="editEmail" required autocomplete="off">

            <label for="editGender">Gender:</label>
            <input type="text" id="editGender" required autocomplete="off">

            <label for="editAddress">Address:</label>
            <input type="text" id="editAddress" required autocomplete="off">

            <label for="editTelephone">Telephone:</label>
            <input type="text" id="editTelephone" required autocomplete="off">

            <label for="editHeartRate">Average Heart Rate:</label>
            <input type="text" id="editHeartRate" required autocomplete="off">

            <label for="editHeight">Height:</label>
            <input type="text" id="editHeight" required autocomplete="off">

            <label for="editWeight">Weight:</label>
            <input type="text" id="editWeight" required autocomplete="off">

            <label for="editBloodType">Blood Type:</label>
            <input type="text" id="editBloodType" required autocomplete="off">

            <button type="submit">Save</button>
        </form>
    </div>
  </div>

  <!-- Patient Enrollment Form with Video -->
  <div class="enrollment-wrapper">
    <!-- Enrollment Form Container -->
    <div class="enrollment-container">
      <h2>Enroll New Patient</h2>
      <!-- Scrollable Form Section -->
      <div class="scrollable-form-group">
        <form id="enrollForm" autocomplete="off">
          <input type="text" id="newNHS" placeholder="NHS" required autocomplete="off" maxlength="10" pattern="\d{10}" title="NHS must be exactly 10 digits">
          
          <select id="newTitle" required>
            <option value="" disabled selected>Select Title</option>
            <option value="Mr">Mr</option>
            <option value="Mrs">Mrs</option>
            <option value="Ms">Ms</option>
            <option value="Dr">Dr</option>
            <option value="Rev">Rev</option>
            <option value="Honorable">Honorable</option>
          </select>
          
          <input type="text" id="newFirst" placeholder="First Name" required autocomplete="off">
          <input type="text" id="newLast" placeholder="Last Name" required autocomplete="off">
          
          <!-- Updated DOB Field -->
          <label for="newDOB">Date of Birth:</label>
          <input type="date" id="newDOB" required autocomplete="off" max="">
          
          <input type="email" id="newEmail" placeholder="Email" required autocomplete="off">
          <select id="newGender" required>
            <option value="" disabled selected>Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
          
          <input type="text" id="newAddress" placeholder="Address" required autocomplete="off">
          <input type="text" id="newTelephone" placeholder="Telephone" required autocomplete="off">
          
          <input type="text" id="newHeartRate" placeholder="Average Heart Rate" required autocomplete="off">
          <input type="text" id="newHeight" placeholder="Height" required autocomplete="off">
          <input type="text" id="newWeight" placeholder="Weight" required autocomplete="off">
          <input type="text" id="newBloodType" placeholder="Blood Type" required autocomplete="off">
          <!-- Enroll Button Outside Scrollable Section -->
          <button type="submit" id="addPatientBtn">Enroll Patient</button>
        </form>
      </div>
      
    </div>

    <!-- Enrollment Video -->
    <video class="enroll-video" autoplay loop muted>
      <source src="/assets/videos/enroldoc.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <!-- SweetAlert2 JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="/js_files/encryption.js"></script>
  <script src="/js_files/admin_patient.js"></script>
  <script src="/js_files/access_control.js"></script> <!-- Add access control script here -->
  <script>
      document.addEventListener("DOMContentLoaded", function() {
          checkAccess('admin_patient'); // Run access check for the admin dashboard
      });
  </script>
</body>
</html>